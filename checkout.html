<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Checkout Mercado Livre Style</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 20px;
  }
  .steps {
    display: flex;
    justify-content: center;
    margin-bottom: 20px;
    gap: 20px;
  }
  .step {
    padding: 10px 20px;
    border: 2px solid #aaa;
    border-radius: 20px;
    cursor: pointer;
    user-select: none;
    color: #555;
    transition: background-color 0.3s, border-color 0.3s;
  }
  .step.active {
    background-color: #007bff;
    color: white;
    border-color: #007bff;
  }
  .step.completed {
    background-color: #28a745;
    color: white;
    border-color: #28a745;
  }

  .content {
    max-width: 500px;
    margin: 0 auto;
  }
  label {
    display: block;
    margin: 10px 0 5px;
  }
  input, select {
    width: 100%;
    padding: 7px;
    margin-bottom: 15px;
    box-sizing: border-box;
  }
  button {
    background-color: #007bff;
    border: none;
    color: white;
    padding: 10px 15px;
    cursor: pointer;
    border-radius: 5px;
    font-size: 16px;
  }
  button:disabled {
    background-color: #999;
    cursor: not-allowed;
  }
  .summary {
    background-color: #f5f5f5;
    padding: 15px;
    border-radius: 10px;
  }
</style>
</head>
<body>

<div class="steps">
  <div class="step active" id="step-1-btn">1. Produto</div>
  <div class="step" id="step-2-btn">2. Dados</div>
  <div class="step" id="step-3-btn">3. Pagamento</div>
  <div class="step" id="step-4-btn">4. Resumo</div>
</div>

<div class="content">

  <!-- Etapa 1 - Escolha do produto -->
  <div id="step-1" class="step-content">
    <h2>Escolha seu Produto</h2>
    <select id="product-select">
      <option value="" disabled selected>Selecione um produto</option>
      <option value="Colar de Prata" data-price="120.00">Colar de Prata - R$ 120,00</option>
      <option value="Brinco de Ouro" data-price="250.00">Brinco de Ouro - R$ 250,00</option>
      <option value="Anel de Diamante" data-price="450.00">Anel de Diamante - R$ 450,00</option>
    </select>
    <button id="to-step-2" disabled>Próxima etapa</button>
  </div>

  <!-- Etapa 2 - Dados pessoais -->
  <div id="step-2" class="step-content" style="display:none;">
    <h2>Dados Pessoais</h2>
    <label for="nome">Nome Completo:</label>
    <input type="text" id="nome" required />
    <label for="cpf">CPF:</label>
    <input type="text" id="cpf" required placeholder="000.000.000-00" />
    <label for="endereco">Endereço (Rua, Logradouro):</label>
    <input type="text" id="endereco" required />
    <button id="to-step-3" disabled>Próxima etapa</button>
  </div>

  <!-- Etapa 3 - Forma de pagamento -->
  <div id="step-3" class="step-content" style="display:none;">
    <h2>Forma de Pagamento</h2>
    <select id="payment-method" required>
      <option value="" disabled selected>Selecione a forma de pagamento</option>
      <option value="cartao_credito">Cartão de Crédito</option>
      <option value="cartao_debito">Cartão de Débito</option>
      <option value="pix">Pix</option>
      <option value="avista">À vista</option>
      <option value="link_pagamento">Link de Pagamento</option>
    </select>
    <button id="to-step-4" disabled>Próxima etapa</button>
  </div>

  <!-- Etapa 4 - Resumo final -->
  <div id="step-4" class="step-content" style="display:none;">
    <h2>Resumo da Compra</h2>
    <div class="summary" id="summary"></div>
    <button id="confirm-btn">Confirmar Compra</button>
  </div>

</div>

<script>
  const stepsButtons = {
    1: document.getElementById('step-1-btn'),
    2: document.getElementById('step-2-btn'),
    3: document.getElementById('step-3-btn'),
    4: document.getElementById('step-4-btn')
  };
  const stepsContents = {
    1: document.getElementById('step-1'),
    2: document.getElementById('step-2'),
    3: document.getElementById('step-3'),
    4: document.getElementById('step-4')
  };

  let currentStep = 1;

  function showStep(step) {
    for(let i=1; i<=4; i++) {
      stepsContents[i].style.display = i === step ? 'block' : 'none';
      if(i === step){
        stepsButtons[i].classList.add('active');
      } else {
        stepsButtons[i].classList.remove('active');
      }
    }
    currentStep = step;
  }

  // Botões topo podem permitir navegação
  for(let i=1; i<=4; i++) {
    stepsButtons[i].addEventListener('click', () => {
      // só permite ir para passos já completados ou atual
      if(i <= currentStep){
        showStep(i);
      }
    });
  }

  // Controle do botão Próxima Etapa na etapa 1
  const productSelect = document.getElementById('product-select');
  const toStep2Btn = document.getElementById('to-step-2');

  productSelect.addEventListener('change', () => {
    toStep2Btn.disabled = productSelect.value === "";
  });

  toStep2Btn.addEventListener('click', () => {
    if(productSelect.value !== "") {
      markStepCompleted(1);
      showStep(2);
      checkStep2Inputs();
    }
  });

  // Etapa 2 - Dados pessoais
  const nomeInput = document.getElementById('nome');
  const cpfInput = document.getElementById('cpf');
  const enderecoInput = document.getElementById('endereco');
  const toStep3Btn = document.getElementById('to-step-3');

  function checkStep2Inputs() {
    toStep3Btn.disabled = !(nomeInput.value.trim() && cpfInput.value.trim() && enderecoInput.value.trim());
  }

  nomeInput.addEventListener('input', checkStep2Inputs);
  cpfInput.addEventListener('input', checkStep2Inputs);
  enderecoInput.addEventListener('input', checkStep2Inputs);

  toStep3Btn.addEventListener('click', () => {
    if(toStep3Btn.disabled) return;
    markStepCompleted(2);
    showStep(3);
    checkStep3Inputs();
  });

  // Etapa 3 - Pagamento
  const paymentMethod = document.getElementById('payment-method');
  const toStep4Btn = document.getElementById('to-step-4');

  paymentMethod.addEventListener('change', () => {
    toStep4Btn.disabled = paymentMethod.value === "";
  });

  toStep4Btn.addEventListener('click', () => {
    if(paymentMethod.value === "") return;
    markStepCompleted(3);
    updateSummary();
    showStep(4);
  });

  // Atualiza resumo
  function updateSummary() {
    const summaryDiv = document.getElementById('summary');
    const productName = productSelect.value;
    const productPrice = parseFloat(productSelect.selectedOptions[0].dataset.price).toFixed(2).replace('.', ',');
    const nome = nomeInput.value;
    const cpf = cpfInput.value;
    const endereco = enderecoInput.value;
    const pagamento = paymentMethod.options[paymentMethod.selectedIndex].text;

    summaryDiv.innerHTML = `
      <p><strong>Produto:</strong> ${productName}</p>
      <p><strong>Preço:</strong> R$ ${productPrice}</p>
      <hr/>
      <p><strong>Nome:</strong> ${nome}</p>
      <p><strong>CPF:</strong> ${cpf}</p>
      <p><strong>Endereço:</strong> ${endereco}</p>
      <hr/>
      <p><strong>Forma de Pagamento:</strong> ${pagamento}</p>
    `;
  }

  // Botão confirmar compra (pode colocar ação depois)
  const confirmBtn = document.getElementById('confirm-btn');
  confirmBtn.addEventListener('click', () => {
    alert('Compra confirmada! Obrigado.');
    // Aqui pode enviar dados via WhatsApp, API, etc.
  });

  // Marca passo como concluído visualmente
  function markStepCompleted(step) {
    stepsButtons[step].classList.add('completed');
  }
</script>

</body>
</html>
